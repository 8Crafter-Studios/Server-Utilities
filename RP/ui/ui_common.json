{
  "namespace": "common",

  "form_scrollable_text_edit_box@common.text_edit_box": {
    "controls": [
      {
        "centering_panel": {
          "type": "panel",
          "size": [ "100% - 6px", "100% - 4px" ],
          "controls": [
            {
              "clipper_panel": {
                "type": "panel",
                "size": "$text_edit_clipping_panel_size",
                "anchor_from": "left_middle",
                "anchor_to": "left_middle",
                "offset": "$text_offset",
                "clips_children": true,
                "$disabled_color|default": "$color",
                "controls": [
                  {
                    "text_edit_text_control@common.scrolling_panel": {
                      "size": [ "100%", "100%" ],
                      "$scroll_size": [ 6, "100%-4px" ],
                      "anchor_from": "top_middle",
                      "anchor_to": "top_middle",
                      "$scrolling_content": "common.text_edit_box_scrolling_content",
                      "$scrolling_content_anchor_from": "bottom_middle",
                      "$scrolling_content_anchor_to": "bottom_middle",
                      "$show_background": false,
                      "$scroll_panel_consume_hover_events": false,
                      "$scroll_bar_left_padding_size": [ 0, 0 ],
                      "$scroll_bar_right_padding_size": [ 2, 0 ]
                    }
                  },
                  {
                    "visibility_panel": {
                      "type": "panel",
                      "controls": [
                        {
                          "place_holder_control@$place_holder_control": {
                            "layer": 1,
                            "size": "$text_edit_box_label_size",
                            "offset": "$text_edit_box_label_offset",
                            "min_size": "$text_edit_box_label_min_size",
                            "anchor_from": "$text_edit_box_label_anchor_point",
                            "anchor_to": "$text_edit_box_label_anchor_point",
                            "$text_alpha|default": "$alpha",
                            "$locked_text_alpha|default": "$disabled_alpha",
                            "$locked_color|default": "$disabled_color"
                          }
                        }
                      ],

                      "bindings": [
                        {
                          "binding_type": "view",
                          "source_control_name": "$text_edit_text_control",
                          "source_property_name": "(#item_name = '')",
                          "target_property_name": "#visible",
                          "resolve_sibling_scope": true
                        }
                      ]
                    }
                  }
                ]
              }
            }
          ]
        }
      },
      {
        "locked": {
          "type": "panel",
          "$disabled_color|default": "$color",
          "controls": [
            {
              "edit_box_indent@$text_background_default": {
                "$color": "$disabled_color",
                "$alpha": "$disabled_alpha"
              }
            }
          ]
        }
      },
      { "default@$text_background_default": {} },
      { "hover@$text_background_hover": {} },
      { "pressed@$text_background_hover": {} }
    ]
  },

  "form_scrollable_multiline_text_edit_box@common.form_scrollable_text_edit_box": {
    "enabled_newline": true,
    "max_length": 100,
    "$text_edit_box_label_size": [ "100%", "100%" ],

    "button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": true,
        "handle_deselect": false,
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": false,
        "handle_deselect": true,
        "mapping_type": "global",
        "consume_event": false
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": true,
        "handle_deselect": false,
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "$text_edit_box_deselected_to_button_id",
        "handle_select": false,
        "handle_deselect": true,
        "mapping_type": "global"
      },
      {
        "to_button_id": "$text_edit_box_hovered_button_id",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "$text_edit_box_clear_from_button_id",
        "to_button_id": "$text_edit_box_clear_to_button_id",
        "handle_select": false,
        "handle_deselect": false,
        "mapping_type": "focused"
      }
    ]
  },

  "form_scrollable_multiline_text_edit_box_2@common.form_scrollable_text_edit_box": {
    "enabled_newline": true,
    "max_length": 1000000000,
    "$text_edit_box_label_size|default": [ "100%", "100%" ],

    "button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": true,
        "handle_deselect": false,
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": false,
        "handle_deselect": true,
        "mapping_type": "global",
        "consume_event": false
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "$text_edit_box_selected_to_button_id",
        "handle_select": true,
        "handle_deselect": false,
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_cancel",
        "to_button_id": "$text_edit_box_deselected_to_button_id",
        "handle_select": false,
        "handle_deselect": true,
        "mapping_type": "global"
      },
      {
        "to_button_id": "$text_edit_box_hovered_button_id",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "$text_edit_box_clear_from_button_id",
        "to_button_id": "$text_edit_box_clear_to_button_id",
        "handle_select": false,
        "handle_deselect": false,
        "mapping_type": "focused"
      }
    ]
  },

  "multiline_text_edit_control@common.multiline_text_edit_box": {
    "anchor_from": "center",
    "anchor_to": "center"/*,
    "$place_holder_text": "npcscreen.addtext",
    "property_bag": {
      "#property_field": "#item_name"
    }*/
  },
  
  "multiline_scrolling_text_box_content@common.multiline_text_edit_control": {
    "$enabled|default": true,
    "size": [ "100%", "100%cm" ],
    "enabled": "$enabled",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "$text_background_default": "common.edit_box_indent",
    "$text_background_hover": "common.edit_box_indent_hover",/*
    "$text_box_text_color": "$npc_dialog_text_color",*//*
    "$text_box_name": "student_message_bubble",*/
    "$text_edit_box_content_binding_name": "#dialogtext",
    // "$color": "$npc_dialog_text_color",
    "$disabled_alpha": 1,
    "max_length": "$max_text_edit_length",
    "$max_text_edit_length|default": 1000,
    "constrain_to_rect": false,

    "$shadow": false,
    "$font_size": "normal",
    "$color|default": [ 1, 1, 1, 1 ],
    "$alpha|default": 1.0,
    "$disabled_alpha|default": 0.5,
    "$text_offset|default": [ 0, 0 ],
    "$text_edit_box_placeholder_content_binding_name": "#placeholder_dialog_text",
    "$text_alpha": 1,
    "$locked_text_alpha": "$disabled_alpha",
    "$locked_color": "$color",/*
    "variables": [
      {
        // Clear placeholder text for non-worldbuilders so they don't see "add text here" when they don't have permission to add text
        "requires": "(not $is_worldbuilder)",
        "$place_holder_text": "",
        "$enabled": false
      }
    ],*/
    // Clear enabled binding, we're using a variable
    "bindings": [
    ],
    "locked_control": "locked",
    "default_control": "default",
    "hover_control": "hover",
    "pressed_control": "pressed",
    "text_control": "label",
    "place_holder_control": "place_holder",
    "controls": [
      {
        "label@common.text_edit_box_label": {
          "layer": 1,
          "size": [ "100%", "default" ],
          "anchor_from": "top_left",
          "anchor_to": "top_left"
        }
      },
      {
        "visibility_panel": {
          "type": "panel",
          "size": [ "100%", "100%c" ],
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "controls": [
            {
              "place_holder@common.text_edit_box_place_holder_label": {
                "layer": 1,
                "size": [ "100%", "default" ],
                "anchor_from": "top_left",
                "anchor_to": "top_left"
              }
            }
          ],

          "bindings": [
            {
              "binding_type": "view",
              "source_control_name": "label",
              "source_property_name": "(#item_name = '')",
              "target_property_name": "#visible",
              "resolve_sibling_scope": true
            }
          ]
        }
      }/*,
      { "background@common.empty_panel": { "size": [ "100%", "100%sm" ] } } */,
      {
        "locked": {
          "type": "panel",
          "$disabled_color|default": "$color",
          "controls": [
            {
              "edit_box_indent@$text_background_default": {
                "$color": "$disabled_color",
                "$alpha": "$disabled_alpha"
              }
            }
          ]
        }
      },
      { "default@$text_background_default": {} },
      { "hover@$text_background_hover": {} },
      { "pressed@$text_background_hover": {} }
    ]
  },

  "text_scroll@common.scrolling_panel": {
    "size": [ "100% - 10px", "100% - 11px" ],
    "$always_handle_scrolling": false,
    "$scrollbar_always_visible": true,
    "$jump_to_bottom_on_update": true,
    "$scrolling_content": "common.multiline_scrolling_text_box_content",
    "$scroll_box_visible_touch": false,
    "$show_background": true,
    "$scroll_bar_left_padding_size": [ 0, 0 ],
    "$scroll_bar_right_padding_size": [ 0, 0 ],
    "$scroll_size": [ 5, "100%" ],
    "$scroll_size_touch": "$scroll_size",
    "offset": [ 0, -1 ]
  }
}
